<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Building"
    xmlns:img="clr-namespace:Images;assembly=Images">

    <!-- Converter loading Image source from relative path (Building/Camp.png) -->
    <img:IconPathConverter x:Key="iconPathConverter"/>

    <!-- Changing Button style to make Image act like a Button and assign a Command -->
    <Style TargetType="{x:Type Button}" x:Key="ImageButtonStyle">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <ContentPresenter/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Building -->
    <Style TargetType="{x:Type local:Building}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:Building}">
                    <Button Style="{StaticResource ImageButtonStyle}" Command="{Binding BuildingClickCommand}">
                        <Image Width="70" DataContext="{TemplateBinding Icon}" Source="{Binding Converter={StaticResource iconPathConverter}}"/>
                    </Button>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
